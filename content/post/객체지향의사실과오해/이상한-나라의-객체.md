---
title: "이상한 나라의 객체"
description: 
date: 2023-07-22T16:18:24+09:00
image: 
math: 
license: 
hidden: false
comments: true
draft: true
---
# 이상한 나라의 객체

## 객체, 그리고 소프트웨어 나라

이 책에서는 이상한 나라의 앨리스의 이야기를 통해 객체를 설명하고 있다. 나오는 내용 중 앨리스는 작은 문을 통과하기 위해 자신의 몸을 작게 만들기 위해 고민했고, 앨리스는 병에 담긴 액체를 마신다는 행동을 취하고 난 뒤 앨리스의 키라는 상태가 변화되었다.
또한 앨리스의 키라는 상태가 변했음에도 앨리스는 앨리스라는 사실은 변하지 않았다. 따라서 앨리스는 상태와 무관하게 식별이 가능하다는 걸 의미한다.

이를 3가지로 요약하면
- 앨리스는 상태를 가지며 상태는 변경 가능하다.
- 앨리스의 상태를 변경시키는 것은 앨리스의 행동이다.
- 앨리스는 어떤 상태에 있더라도 유일하게 식별가능하다.


## 상태

> ### 상태란?
> 객체들이 과거에 했던 행동들의 결과이다.

### 왜 필요한가?
앨리스가 문을 통과하기 위해서는 앨리스가 어떤 특정한 행동들을 했는지를 추적해야한다. 앨리스가 문을 통과할 때 앨리스가 작은 병에 든 물을 마셨는가를 살펴보아야한다. 하지만 이 방식은 앨리스가 했던 모든 행동들을 기억해야 가능하기 때문에 행동의 결과를 설명하기 매우 어려워진다.

상태를 사용하게 되면 객체들의 과거이력들을 추적하지 않고도 객체의 행동의 결고를 쉽게 표현할 수 있다.

앨리스가 문을 통과하기 위해서는 과거에 병에든 액체를 마셨는지 안 마셨는지는 중지 않다. 현재 앨리스의 키와 문의 높이라는 상태만 알게되면 문을 통과할 수 있는 행동을 쉽게 예측할 수 있다.


## 행동

> ### 행동이란?
> 객체의 상태를 변경하기 위한 일련의 과정들이다.

행동은 객체의 상태를 변경시크는 행위이지만 행동에 대한 결과는 상태에 의존적이다. 앨리스가 음료를 마신다는 행동 후에는 앨리스의 키는 마시기 전보다 작아져야한다.
이를 보면 상태와 행동은 아래와 같은 관계 있다는 걸 확인 할 수 있다.

- 객체의 행동은 상태에 영향을 받는다
- 객체의 행동은 상태를 변경시킨다.

### 협력과 행동
객체가 다른 객체와 협력하는 방법은 다른 객체에게 요청을 보내는 것이다. 객체는 요청을 처리하기 위해 적절한 방법에 따라 행동한다.

이 말이 의미하는바는 객체는 자신외의 다른 객체의 상태를 직접적으로 변경 할 수 없을 의미한다. 앨리스라는 객체는 음료라는 객체의 상태를 직접적으로 변경할 수 없다. 음료를 마신다라는 행동을 통해 음료라는 객체에게 먹은만큼 양을 줄이라는 매시지를 보낸다.
앨리스라는 객체는 음료의 상태를 직접적으로 변경하지 않고 요청을 보내 상태를 변경하도록 만들고 이를 수신한 음료라는 객체가 자신의 상태를 변경한 것이다.

### 상태 캡슐화
협력과 행동에서 음료라는 객체의 상태를 변경하는 것은 음료라는 객체 자신이라는 말을 했는데 이를 바로 상태 캡슐화라고 할 수 있다.
앨리스라는 객체는 직접적으로 음료의 상태를 변경할 수 없다 앨리스는 음료에게 마신다라는 메시지를 전달 할 뿐 음료의 상태를 변경하는 것은 음료의 몫이다. 결론적으로  객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.

이를 통해 객체의 자율성을 높이게 된다. 자율성이 높은 객체는 스스로 판단하고 스스로 결졍하기 때문에 객체의 자율성이 높아질수록 객체의 지능도 높아진다.

협력에 참여하는 객체들의 지능이 높을수록 협력은 유연하고 간결해진다.

## 식별자
> ### 식별자란?
> 객체란 인간의 인지 능력을 이용해 식별 가능한 경계를 가진 모든 사물들을 의미하는데 식별 가능하다는 것은 객체를 서로 구별할 수 있는 특별한 프로퍼티가 있다는 것을 의미한다. 이 특별한 프로퍼티를 식별자라고한다.

객체가 가지는 프로퍼티의 타입은 객체나 단순한 값 중 하나가 될 수 있다. 값과 객체의 가장 큰 차이점은 값은 식별자를 가지지 않지만 객체는 식별자를가진다.

값(value)는 숫자, 문자열, 날짜, 시간, 금액 등과 같이 변하지 않는 양을 모델링한다. 값의 상태는 변하지 않기 때문에 불변 상태를 가진다고 말한다.
따라서 값의 상태가 같으면 두 인스턴스는 동일한 것으로 판단하고 다르면 두 인스턴스는 다른것으로 판단한다. 이처럼 상태를 이용해 두 값이 같은지 판단할 수 있는 성질을 동등성(equality)이라고한다.

객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다. 따라서 객체는 가변 상태를 가진다고 말한다.
타입이 같은 두 객체의 상태가 완전히 똑같더라도 두 객체는 별개의 객체로 다루어야한다. 이름이 앨리스이고 키가 같은 두 사람이 있다면 우리는 이 두사람을 같은 사람으로 보지 않는 것처럼말이다.
이 때 두 객체의 상태가 다르더라도 식별자가 같다면 두 객체를 같은 객체라고 판단할 수 있다. 이를 동일성(identical)이라고한다.

간단한 예로 사람이라는 식별자를 가진 두 객체가 있다. 한 객체의 이름은 앨리스이고 키가 150cm이다 다른 객체의 이름은 스티븐이고 키가 180cm이다.
이 두 객체는 서로 다른 상태를 가지고 있지만 사람이라는 식별자가 같으므로 두 객체가 모두 같은 사람 객체라는 걸 알 수 있다.


## 은유와 객체
객체지향 설계에서 사람들이 많이 착각하는 부분이 현실세계를 모방한 것이 객체라고 생각한다. 이 책에서 말하는 객체란 현실세계를 모방한 것 따위가 아니다

이상한 나라의 엘리스를 보면 트럼프가 손과 팔을 가지고 움직이고 말을 할 수 있다. 이는 현실의 트럼프와 명백이 다르다는 것을 알 수 있다. 소프트웨어에서의 객체는 현실세계를 추상화 하거나 모방한 것이 아닌 단순히 유사성을 가지고 있을 뿐이다.

이 글에서 의미하는 객체지향 설계란 단순히 현실세계를 모방해서 표현하는 것이 아닌 나만의 소프트웨어 세상을 위한 현실세상의 표현을 이용해 나만의 객체를 만들고 이를 통해 새로운 세계를 구성해나가면 된다.


## 마치며
이 장에서는 객체란 상태, 행동, 식별자를 가지며 객체는 단순히 현실 세계를 모방한 것이 아닌 은유한 것이라는 내용을 담고 있다는 생각이든다.







